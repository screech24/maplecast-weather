{"ast":null,"code":"import React from'react';import ReactDOM from'react-dom/client';import'./index.css';import App from'./App';import reportWebVitals from'./reportWebVitals';import'leaflet/dist/leaflet.css';// Function to show update notification\nimport{jsx as _jsx}from\"react/jsx-runtime\";const showUpdateNotification=()=>{// Check if we already have a notification showing\nif(document.querySelector('.update-notification')){return;}// Create notification element\nconst notification=document.createElement('div');notification.className='update-notification';notification.innerHTML=\"\\n    <div class=\\\"update-notification-content\\\">\\n      <p>A new version of the app is available!</p>\\n      <button id=\\\"update-refresh-button\\\">Refresh to update</button>\\n      <button id=\\\"update-dismiss-button\\\">Dismiss</button>\\n    </div>\\n  \";// Add to body\ndocument.body.appendChild(notification);// Add event listeners\ndocument.getElementById('update-refresh-button').addEventListener('click',()=>{window.location.reload();});document.getElementById('update-dismiss-button').addEventListener('click',()=>{notification.remove();});};// Register service worker for PWA functionality\nconst registerServiceWorker=async()=>{if('serviceWorker'in navigator){// Only register service worker in production environment\n// This prevents the MIME type error in development\nif(process.env.NODE_ENV==='production'){try{// Use the PUBLIC_URL environment variable to get the correct base path\nconst publicUrl=process.env.PUBLIC_URL||'';const swUrl=\"\".concat(publicUrl,\"/service-worker.js\");console.log('Registering service worker from:',swUrl);const registration=await navigator.serviceWorker.register(swUrl);console.log('Service Worker registered with scope:',registration.scope);// Check for updates to the Service Worker\nregistration.addEventListener('updatefound',()=>{const newWorker=registration.installing;console.log('Service Worker update found!');newWorker.addEventListener('statechange',()=>{if(newWorker.state==='installed'&&navigator.serviceWorker.controller){console.log('New Service Worker installed, ready to take over');// Notify the user about the update\nshowUpdateNotification();}});});// Listen for messages from the service worker\nnavigator.serviceWorker.addEventListener('message',event=>{console.log('Received message from service worker:',event.data);if(event.data&&event.data.type==='SW_UPDATED'){console.log(\"Service worker updated to version \".concat(event.data.version));showUpdateNotification();}});// Handle controller change (when a new service worker takes over)\nnavigator.serviceWorker.addEventListener('controllerchange',()=>{console.log('Service Worker controller changed');// We don't reload here to avoid disrupting the user experience\n// Instead, we show a notification that allows the user to refresh\n});return registration;}catch(error){console.error('Service Worker registration failed:',error);}}else{console.log('Service Worker not registered in development mode to prevent MIME type errors');}}};// Register the service worker\nregisterServiceWorker();const root=ReactDOM.createRoot(document.getElementById('root'));root.render(/*#__PURE__*/_jsx(React.StrictMode,{children:/*#__PURE__*/_jsx(App,{})}));// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();","map":{"version":3,"names":["React","ReactDOM","App","reportWebVitals","jsx","_jsx","showUpdateNotification","document","querySelector","notification","createElement","className","innerHTML","body","appendChild","getElementById","addEventListener","window","location","reload","remove","registerServiceWorker","navigator","process","env","NODE_ENV","publicUrl","PUBLIC_URL","swUrl","concat","console","log","registration","serviceWorker","register","scope","newWorker","installing","state","controller","event","data","type","version","error","root","createRoot","render","StrictMode","children"],"sources":["/home/jesse/Desktop/Weather Project/maplecast/src/index.js"],"sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport 'leaflet/dist/leaflet.css';\n\n// Function to show update notification\nconst showUpdateNotification = () => {\n  // Check if we already have a notification showing\n  if (document.querySelector('.update-notification')) {\n    return;\n  }\n  \n  // Create notification element\n  const notification = document.createElement('div');\n  notification.className = 'update-notification';\n  notification.innerHTML = `\n    <div class=\"update-notification-content\">\n      <p>A new version of the app is available!</p>\n      <button id=\"update-refresh-button\">Refresh to update</button>\n      <button id=\"update-dismiss-button\">Dismiss</button>\n    </div>\n  `;\n  \n  // Add to body\n  document.body.appendChild(notification);\n  \n  // Add event listeners\n  document.getElementById('update-refresh-button').addEventListener('click', () => {\n    window.location.reload();\n  });\n  \n  document.getElementById('update-dismiss-button').addEventListener('click', () => {\n    notification.remove();\n  });\n};\n\n// Register service worker for PWA functionality\nconst registerServiceWorker = async () => {\n  if ('serviceWorker' in navigator) {\n    // Only register service worker in production environment\n    // This prevents the MIME type error in development\n    if (process.env.NODE_ENV === 'production') {\n      try {\n        // Use the PUBLIC_URL environment variable to get the correct base path\n        const publicUrl = process.env.PUBLIC_URL || '';\n        const swUrl = `${publicUrl}/service-worker.js`;\n        \n        console.log('Registering service worker from:', swUrl);\n        const registration = await navigator.serviceWorker.register(swUrl);\n        console.log('Service Worker registered with scope:', registration.scope);\n        \n        // Check for updates to the Service Worker\n        registration.addEventListener('updatefound', () => {\n          const newWorker = registration.installing;\n          console.log('Service Worker update found!');\n          \n          newWorker.addEventListener('statechange', () => {\n            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {\n              console.log('New Service Worker installed, ready to take over');\n              // Notify the user about the update\n              showUpdateNotification();\n            }\n          });\n        });\n        \n        // Listen for messages from the service worker\n        navigator.serviceWorker.addEventListener('message', (event) => {\n          console.log('Received message from service worker:', event.data);\n          \n          if (event.data && event.data.type === 'SW_UPDATED') {\n            console.log(`Service worker updated to version ${event.data.version}`);\n            showUpdateNotification();\n          }\n        });\n        \n        // Handle controller change (when a new service worker takes over)\n        navigator.serviceWorker.addEventListener('controllerchange', () => {\n          console.log('Service Worker controller changed');\n          // We don't reload here to avoid disrupting the user experience\n          // Instead, we show a notification that allows the user to refresh\n        });\n        \n        return registration;\n      } catch (error) {\n        console.error('Service Worker registration failed:', error);\n      }\n    } else {\n      console.log('Service Worker not registered in development mode to prevent MIME type errors');\n    }\n  }\n};\n\n// Register the service worker\nregisterServiceWorker();\n\nconst root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}