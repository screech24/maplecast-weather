{"ast":null,"code":"import React,{useState,useEffect,useCallback,useRef}from'react';import{fetchWeatherAlerts,checkForNewAlerts,clearAlertsCache}from'../utils/alertUtils';import{EC_ALERT_COLORS}from'../utils/environmentCanadaApi';import{getProvinceFromCoordinates}from'../utils/canadaLocations';import'./WeatherAlerts.css';// Polling interval: 1 minute for more responsive updates\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const POLLING_INTERVAL=1*60*1000;const WeatherAlerts=_ref=>{let{locationInfo,currentPage,isSearching}=_ref;const[alerts,setAlerts]=useState([]);const[isExpanded,setIsExpanded]=useState(false);const[expandedAlertId,setExpandedAlertId]=useState(null);const[loading,setLoading]=useState(true);// Start with loading=true\nconst[initialFetchDone,setInitialFetchDone]=useState(false);const[error,setError]=useState(null);const[prevLocationKey,setPrevLocationKey]=useState(null);const[lastUpdate,setLastUpdate]=useState(null);const pollingRef=useRef(null);const fetchInProgressRef=useRef(false);const regionTimeoutRef=useRef(null);// Function to filter out expired alerts\nconst filterExpiredAlerts=useCallback(alertsList=>{const now=new Date();return alertsList.filter(alert=>{if(!alert.expires)return true;const expiryDate=new Date(alert.expires);return expiryDate>now;});},[]);// Function to fetch alerts\nconst fetchAlerts=useCallback(async function(){let forceRefresh=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;// Prevent concurrent fetches\nif(fetchInProgressRef.current){console.log('Fetch already in progress, skipping');return;}// Skip if we're in the middle of a search or don't have coordinates\nconst hasCoordinates=locationInfo&&locationInfo.lat&&locationInfo.lon;if(isSearching||!hasCoordinates){console.log('Skipping alert fetch: searching or missing coordinates');return;}// Must have a city name to filter alerts properly - without it, all province alerts show\nconst cityName=locationInfo.name||locationInfo.city;if(!cityName){console.log('âš ï¸ No city name yet - waiting for location data before fetching alerts...');return;}// Must have a region/province\nconst currentRegion=locationInfo.region||locationInfo.state;if(!currentRegion){console.log('âš ï¸ No region yet - waiting for location data before fetching alerts...');return;}// Clear cache on force refresh to get truly fresh data\nif(forceRefresh){console.log('ðŸ”„ Force refresh - clearing alerts cache');clearAlertsCache();}fetchInProgressRef.current=true;setLoading(true);setError(null);try{console.log('ðŸš¨ Fetching alerts for:',locationInfo===null||locationInfo===void 0?void 0:locationInfo.name,locationInfo===null||locationInfo===void 0?void 0:locationInfo.lat,locationInfo===null||locationInfo===void 0?void 0:locationInfo.lon);const fetchedAlerts=await fetchWeatherAlerts(locationInfo);console.log('ðŸš¨ Fetched alerts:',fetchedAlerts);const activeAlerts=filterExpiredAlerts(fetchedAlerts);console.log('Active alerts after filtering:',activeAlerts.length);setAlerts(activeAlerts);setInitialFetchDone(true);setLastUpdate(new Date());// Auto-expand if there are alerts and we're on the first page\nif(activeAlerts.length>0&&currentPage===0){setIsExpanded(true);}}catch(err){console.error('Error fetching alerts:',err);setError('Failed to fetch weather alerts');setAlerts([]);}finally{setLoading(false);fetchInProgressRef.current=false;}},[locationInfo,currentPage,isSearching,filterExpiredAlerts]);// Function to check for new/updated alerts\nconst pollForAlerts=useCallback(async()=>{if(isSearching||!locationInfo||!locationInfo.lat||!locationInfo.lon){return;}if(fetchInProgressRef.current){return;}console.log('ðŸ”„ Polling for alert updates...');try{const{newAlerts,updatedAlerts,removedAlerts}=await checkForNewAlerts(locationInfo);if(newAlerts.length>0||updatedAlerts.length>0||removedAlerts.length>0){console.log(\"\\uD83D\\uDCE2 Alert changes: \".concat(newAlerts.length,\" new, \").concat(updatedAlerts.length,\" updated, \").concat(removedAlerts.length,\" removed\"));setAlerts(prevAlerts=>{const removedTitles=new Set(removedAlerts.map(a=>a.title));const updatedTitles=new Set(updatedAlerts.map(a=>a.title));let newAlertList=prevAlerts.filter(a=>!removedTitles.has(a.title)&&!updatedTitles.has(a.title));newAlertList=[...newAlerts,...updatedAlerts,...newAlertList];const activeAlerts=filterExpiredAlerts(newAlertList);const severityOrder={'Severe':0,'Moderate':1,'Minor':2};activeAlerts.sort((a,b)=>(severityOrder[a.severity]||2)-(severityOrder[b.severity]||2));return activeAlerts;});setLastUpdate(new Date());if(newAlerts.length>0&&currentPage===0){setIsExpanded(true);}}}catch(err){console.error('Error polling for alerts:',err);}},[locationInfo,currentPage,isSearching,filterExpiredAlerts]);// Handle location changes\nuseEffect(()=>{// Create location key from coordinates\nconst locationKey=locationInfo!==null&&locationInfo!==void 0&&locationInfo.lat&&locationInfo!==null&&locationInfo!==void 0&&locationInfo.lon?\"\".concat(locationInfo.lat,\",\").concat(locationInfo.lon):null;// Check if we have coordinates\nconst hasCoordinates=locationInfo&&locationInfo.lat&&locationInfo.lon;// Check if we have region data\nconst hasRegion=locationInfo&&(locationInfo.region||locationInfo.state);if(locationKey!==prevLocationKey){// Coordinates changed - clear old alerts immediately\nconsole.log('ðŸ“ Coordinates changed, clearing old alerts');clearAlertsCache();setAlerts([]);setIsExpanded(false);setExpandedAlertId(null);setInitialFetchDone(false);setLoading(true);setPrevLocationKey(locationKey);// Clear any existing timeout\nif(regionTimeoutRef.current){clearTimeout(regionTimeoutRef.current);regionTimeoutRef.current=null;}if(hasCoordinates){if(hasRegion){// Have everything - fetch immediately\nconsole.log('ðŸ“ Complete location available, fetching alerts');fetchAlerts(true);}else{// Have coordinates but no region - wait briefly then fetch anyway\nconsole.log('ðŸ“ Waiting for region data (will fetch in 2s anyway)...');regionTimeoutRef.current=setTimeout(()=>{console.log('ðŸ“ Timeout - fetching alerts without region data');if(!fetchInProgressRef.current){fetchAlerts(true);}},2000);}}}else if(hasCoordinates&&hasRegion&&!initialFetchDone&&!fetchInProgressRef.current){// Region just became available - cancel timeout and fetch now\nconsole.log('ðŸ“ Region now available, fetching alerts');if(regionTimeoutRef.current){clearTimeout(regionTimeoutRef.current);regionTimeoutRef.current=null;}fetchAlerts(true);}else if(!locationKey&&prevLocationKey!==null){// No location - clear everything\nsetAlerts([]);setIsExpanded(false);setExpandedAlertId(null);setInitialFetchDone(false);setPrevLocationKey(null);}// Cleanup timeout on unmount\nreturn()=>{if(regionTimeoutRef.current){clearTimeout(regionTimeoutRef.current);}};},[locationInfo,prevLocationKey,initialFetchDone,fetchAlerts]);// Handle page changes\nuseEffect(()=>{if(currentPage!==0){setIsExpanded(false);}},[currentPage]);// Set up polling\nuseEffect(()=>{if(locationInfo&&locationInfo.lat&&locationInfo.lon&&!isSearching&&initialFetchDone){console.log('ðŸ”„ Starting alert polling');if(pollingRef.current){clearInterval(pollingRef.current);}pollingRef.current=setInterval(pollForAlerts,POLLING_INTERVAL);const handleVisibilityChange=()=>{if(!document.hidden){pollForAlerts();}};document.addEventListener('visibilitychange',handleVisibilityChange);return()=>{if(pollingRef.current){clearInterval(pollingRef.current);}document.removeEventListener('visibilitychange',handleVisibilityChange);};}},[locationInfo,isSearching,initialFetchDone,pollForAlerts]);// Regularly filter expired alerts\nuseEffect(()=>{const expiryCheckInterval=setInterval(()=>{setAlerts(prevAlerts=>{const activeAlerts=filterExpiredAlerts(prevAlerts);if(activeAlerts.length!==prevAlerts.length){console.log('Removing expired alerts, remaining:',activeAlerts.length);return activeAlerts;}return prevAlerts;});},60*1000);return()=>clearInterval(expiryCheckInterval);},[filterExpiredAlerts]);const toggleExpanded=()=>{setIsExpanded(!isExpanded);};const toggleAlertExpanded=alertId=>{setExpandedAlertId(expandedAlertId===alertId?null:alertId);};// Get alert color style based on EC color code\nconst getAlertColorStyle=alert=>{const ecColor=alert.ecColor||'GREY';const colors=EC_ALERT_COLORS[ecColor]||EC_ALERT_COLORS.GREY;return{backgroundColor:colors.bg,color:colors.text,borderColor:colors.border};};// Get EC color class for border\nconst getECColorClass=alert=>{const ecColor=alert.ecColor||'GREY';return\"alert-ec-\".concat(ecColor.toLowerCase());};// Format date for display\nconst formatDate=dateString=>{try{const date=new Date(dateString);return date.toLocaleString('en-CA',{weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'numeric',minute:'2-digit',timeZoneName:'short'});}catch(err){return dateString;}};// If no coordinates, don't render anything\nif(!locationInfo||!locationInfo.lat||!locationInfo.lon){return null;}// Show loading spinner during initial fetch\nif(loading&&!initialFetchDone){return/*#__PURE__*/_jsx(\"div\",{className:\"weather-alerts-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alerts-header alerts-loading-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-header-content\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-spinner fa-spin\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Checking for weather alerts...\"})]})})});}// If no alerts after fetch, show green \"No active alerts\" banner\nif(alerts.length===0&&initialFetchDone){return/*#__PURE__*/_jsx(\"div\",{className:\"weather-alerts-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"alerts-header no-alerts\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-header-content\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-check-circle\"}),/*#__PURE__*/_jsx(\"span\",{children:\"No active weather alerts\"})]})})});}// Get the header color based on the most severe alert\nconst mostSevereAlert=alerts[0];const headerColors=(mostSevereAlert===null||mostSevereAlert===void 0?void 0:mostSevereAlert.colors)||EC_ALERT_COLORS[mostSevereAlert===null||mostSevereAlert===void 0?void 0:mostSevereAlert.ecColor]||EC_ALERT_COLORS.GREY;return/*#__PURE__*/_jsxs(\"div\",{className:\"weather-alerts-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"alerts-header \".concat(isExpanded?'expanded':''),style:{backgroundColor:headerColors.bg,color:headerColors.text},onClick:toggleExpanded,children:/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-header-content\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-triangle-exclamation\"}),/*#__PURE__*/_jsxs(\"span\",{children:[alerts.length,\" Weather Alert\",alerts.length!==1?'s':'']}),/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid \".concat(isExpanded?'fa-chevron-up':'fa-chevron-down')})]})}),isExpanded&&/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-content\",children:[error&&/*#__PURE__*/_jsx(\"div\",{className:\"alerts-error\",children:error}),alerts.map(alert=>{var _alert$details,_alert$details2,_alert$details3,_alert$details4,_alert$details5,_alert$details6,_alert$details7,_alert$details8,_alert$details9;return/*#__PURE__*/_jsxs(\"div\",{className:\"alert-item \".concat(getECColorClass(alert)),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-header\",onClick:()=>toggleAlertExpanded(alert.id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-title\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"alert-type-badge\",style:getAlertColorStyle(alert),children:alert.alertType||'ALERT'}),/*#__PURE__*/_jsx(\"span\",{className:\"alert-title-text\",children:alert.title})]}),expandedAlertId!==alert.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert-areas-preview\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-map\"}),/*#__PURE__*/_jsx(\"span\",{children:alert.matchedArea||alert.coverage||'Your area'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-actions\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid \".concat(expandedAlertId===alert.id?'fa-chevron-up':'fa-chevron-down')})})]}),expandedAlertId===alert.id&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert-details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-issued-time\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-clock\"}),/*#__PURE__*/_jsx(\"span\",{children:formatDate(alert.sent)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-meta-grid\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-meta-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"meta-label\",children:\"Impact Level:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-value impact-\".concat((((_alert$details=alert.details)===null||_alert$details===void 0?void 0:_alert$details.impactLevel)||alert.severity||'moderate').toLowerCase()),children:((_alert$details2=alert.details)===null||_alert$details2===void 0?void 0:_alert$details2.impactLevel)||alert.severity||'Moderate'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-meta-box\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"meta-label\",children:\"Forecast Confidence:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"meta-value\",children:((_alert$details3=alert.details)===null||_alert$details3===void 0?void 0:_alert$details3.forecastConfidence)||alert.certainty||'Observed'})]})]}),((_alert$details4=alert.details)===null||_alert$details4===void 0?void 0:_alert$details4.summary)&&/*#__PURE__*/_jsx(\"div\",{className:\"alert-summary\",children:alert.details.summary.split('\\n\\n').map((paragraph,index)=>paragraph.trim()?/*#__PURE__*/_jsx(\"p\",{children:paragraph.trim()},index):null)}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-section-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-cloud-bolt\"}),/*#__PURE__*/_jsx(\"span\",{children:\"What\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-section-content\",children:((_alert$details5=alert.details)===null||_alert$details5===void 0?void 0:_alert$details5.what)||alert.title})]}),((_alert$details6=alert.details)===null||_alert$details6===void 0?void 0:_alert$details6.when)&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert-section\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-section-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-calendar\"}),/*#__PURE__*/_jsx(\"span\",{children:\"When\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-section-content\",children:alert.details.when})]}),(((_alert$details7=alert.details)===null||_alert$details7===void 0?void 0:_alert$details7.remarks)||((_alert$details8=alert.details)===null||_alert$details8===void 0?void 0:_alert$details8.additionalInfo))&&/*#__PURE__*/_jsx(\"div\",{className:\"alert-remarks\",children:(alert.details.remarks||alert.details.additionalInfo).split('\\n\\n').map((paragraph,index)=>paragraph.trim()?/*#__PURE__*/_jsx(\"p\",{children:paragraph.trim()},index):null)}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-section alert-in-effect\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"alert-section-label\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-map\"}),/*#__PURE__*/_jsx(\"span\",{children:\"In Effect For\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"alert-section-content\",children:alert.matchedArea||((_alert$details9=alert.details)===null||_alert$details9===void 0?void 0:_alert$details9.inEffectFor)||alert.coverage||'Your area'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-footer\",children:[alert.expires&&/*#__PURE__*/_jsxs(\"div\",{className:\"alert-expires\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-hourglass-end\"}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Expires: \",formatDate(alert.expires)]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"alert-source\",children:[\"Source: \",alert.provider]})]}),alert.detailsUrl&&/*#__PURE__*/_jsx(\"div\",{className:\"alert-link\",children:/*#__PURE__*/_jsxs(\"a\",{href:alert.detailsUrl,target:\"_blank\",rel:\"noopener noreferrer\",onClick:e=>e.stopPropagation(),children:[\"View Full Details on Environment Canada \",/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-external-link\"})]})})]})]},alert.id);}),/*#__PURE__*/_jsxs(\"div\",{className:\"alerts-footer\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"refresh-alerts-btn\",onClick:()=>fetchAlerts(true),disabled:loading,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid \".concat(loading?'fa-spinner fa-spin':'fa-rotate')}),loading?'Refreshing...':'Refresh Alerts']}),lastUpdate&&/*#__PURE__*/_jsxs(\"span\",{className:\"last-update\",children:[\"Last updated: \",lastUpdate.toLocaleTimeString()]})]})]})]});};export default WeatherAlerts;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","fetchWeatherAlerts","checkForNewAlerts","clearAlertsCache","EC_ALERT_COLORS","getProvinceFromCoordinates","jsx","_jsx","jsxs","_jsxs","POLLING_INTERVAL","WeatherAlerts","_ref","locationInfo","currentPage","isSearching","alerts","setAlerts","isExpanded","setIsExpanded","expandedAlertId","setExpandedAlertId","loading","setLoading","initialFetchDone","setInitialFetchDone","error","setError","prevLocationKey","setPrevLocationKey","lastUpdate","setLastUpdate","pollingRef","fetchInProgressRef","regionTimeoutRef","filterExpiredAlerts","alertsList","now","Date","filter","alert","expires","expiryDate","fetchAlerts","forceRefresh","arguments","length","undefined","current","console","log","hasCoordinates","lat","lon","cityName","name","city","currentRegion","region","state","fetchedAlerts","activeAlerts","err","pollForAlerts","newAlerts","updatedAlerts","removedAlerts","concat","prevAlerts","removedTitles","Set","map","a","title","updatedTitles","newAlertList","has","severityOrder","sort","b","severity","locationKey","hasRegion","clearTimeout","setTimeout","clearInterval","setInterval","handleVisibilityChange","document","hidden","addEventListener","removeEventListener","expiryCheckInterval","toggleExpanded","toggleAlertExpanded","alertId","getAlertColorStyle","ecColor","colors","GREY","backgroundColor","bg","color","text","borderColor","border","getECColorClass","toLowerCase","formatDate","dateString","date","toLocaleString","weekday","year","month","day","hour","minute","timeZoneName","className","children","mostSevereAlert","headerColors","style","onClick","_alert$details","_alert$details2","_alert$details3","_alert$details4","_alert$details5","_alert$details6","_alert$details7","_alert$details8","_alert$details9","id","alertType","matchedArea","coverage","sent","details","impactLevel","forecastConfidence","certainty","summary","split","paragraph","index","trim","what","when","remarks","additionalInfo","inEffectFor","provider","detailsUrl","href","target","rel","e","stopPropagation","disabled","toLocaleTimeString"],"sources":["/home/jesse/Desktop/Weather Project/maplecast/src/components/WeatherAlerts.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { fetchWeatherAlerts, checkForNewAlerts, clearAlertsCache } from '../utils/alertUtils';\nimport { EC_ALERT_COLORS } from '../utils/environmentCanadaApi';\nimport { getProvinceFromCoordinates } from '../utils/canadaLocations';\nimport './WeatherAlerts.css';\n\n// Polling interval: 1 minute for more responsive updates\nconst POLLING_INTERVAL = 1 * 60 * 1000;\n\nconst WeatherAlerts = ({ locationInfo, currentPage, isSearching }) => {\n  const [alerts, setAlerts] = useState([]);\n  const [isExpanded, setIsExpanded] = useState(false);\n  const [expandedAlertId, setExpandedAlertId] = useState(null);\n  const [loading, setLoading] = useState(true); // Start with loading=true\n  const [initialFetchDone, setInitialFetchDone] = useState(false);\n  const [error, setError] = useState(null);\n  const [prevLocationKey, setPrevLocationKey] = useState(null);\n  const [lastUpdate, setLastUpdate] = useState(null);\n  const pollingRef = useRef(null);\n  const fetchInProgressRef = useRef(false);\n  const regionTimeoutRef = useRef(null);\n\n  // Function to filter out expired alerts\n  const filterExpiredAlerts = useCallback((alertsList) => {\n    const now = new Date();\n    return alertsList.filter(alert => {\n      if (!alert.expires) return true;\n      const expiryDate = new Date(alert.expires);\n      return expiryDate > now;\n    });\n  }, []);\n\n  // Function to fetch alerts\n  const fetchAlerts = useCallback(async (forceRefresh = false) => {\n    // Prevent concurrent fetches\n    if (fetchInProgressRef.current) {\n      console.log('Fetch already in progress, skipping');\n      return;\n    }\n\n    // Skip if we're in the middle of a search or don't have coordinates\n    const hasCoordinates = locationInfo && locationInfo.lat && locationInfo.lon;\n\n    if (isSearching || !hasCoordinates) {\n      console.log('Skipping alert fetch: searching or missing coordinates');\n      return;\n    }\n\n    // Must have a city name to filter alerts properly - without it, all province alerts show\n    const cityName = locationInfo.name || locationInfo.city;\n    if (!cityName) {\n      console.log('âš ï¸ No city name yet - waiting for location data before fetching alerts...');\n      return;\n    }\n\n    // Must have a region/province\n    const currentRegion = locationInfo.region || locationInfo.state;\n    if (!currentRegion) {\n      console.log('âš ï¸ No region yet - waiting for location data before fetching alerts...');\n      return;\n    }\n\n    // Clear cache on force refresh to get truly fresh data\n    if (forceRefresh) {\n      console.log('ðŸ”„ Force refresh - clearing alerts cache');\n      clearAlertsCache();\n    }\n\n    fetchInProgressRef.current = true;\n    setLoading(true);\n    setError(null);\n\n    try {\n      console.log('ðŸš¨ Fetching alerts for:', locationInfo?.name, locationInfo?.lat, locationInfo?.lon);\n      const fetchedAlerts = await fetchWeatherAlerts(locationInfo);\n      console.log('ðŸš¨ Fetched alerts:', fetchedAlerts);\n\n      const activeAlerts = filterExpiredAlerts(fetchedAlerts);\n      console.log('Active alerts after filtering:', activeAlerts.length);\n\n      setAlerts(activeAlerts);\n      setInitialFetchDone(true);\n      setLastUpdate(new Date());\n\n      // Auto-expand if there are alerts and we're on the first page\n      if (activeAlerts.length > 0 && currentPage === 0) {\n        setIsExpanded(true);\n      }\n    } catch (err) {\n      console.error('Error fetching alerts:', err);\n      setError('Failed to fetch weather alerts');\n      setAlerts([]);\n    } finally {\n      setLoading(false);\n      fetchInProgressRef.current = false;\n    }\n  }, [locationInfo, currentPage, isSearching, filterExpiredAlerts]);\n\n  // Function to check for new/updated alerts\n  const pollForAlerts = useCallback(async () => {\n    if (isSearching || !locationInfo || !locationInfo.lat || !locationInfo.lon) {\n      return;\n    }\n    if (fetchInProgressRef.current) {\n      return;\n    }\n\n    console.log('ðŸ”„ Polling for alert updates...');\n\n    try {\n      const { newAlerts, updatedAlerts, removedAlerts } = await checkForNewAlerts(locationInfo);\n\n      if (newAlerts.length > 0 || updatedAlerts.length > 0 || removedAlerts.length > 0) {\n        console.log(`ðŸ“¢ Alert changes: ${newAlerts.length} new, ${updatedAlerts.length} updated, ${removedAlerts.length} removed`);\n\n        setAlerts(prevAlerts => {\n          const removedTitles = new Set(removedAlerts.map(a => a.title));\n          const updatedTitles = new Set(updatedAlerts.map(a => a.title));\n\n          let newAlertList = prevAlerts.filter(a =>\n            !removedTitles.has(a.title) && !updatedTitles.has(a.title)\n          );\n\n          newAlertList = [...newAlerts, ...updatedAlerts, ...newAlertList];\n\n          const activeAlerts = filterExpiredAlerts(newAlertList);\n          const severityOrder = { 'Severe': 0, 'Moderate': 1, 'Minor': 2 };\n          activeAlerts.sort((a, b) => (severityOrder[a.severity] || 2) - (severityOrder[b.severity] || 2));\n\n          return activeAlerts;\n        });\n\n        setLastUpdate(new Date());\n\n        if (newAlerts.length > 0 && currentPage === 0) {\n          setIsExpanded(true);\n        }\n      }\n    } catch (err) {\n      console.error('Error polling for alerts:', err);\n    }\n  }, [locationInfo, currentPage, isSearching, filterExpiredAlerts]);\n\n  // Handle location changes\n  useEffect(() => {\n    // Create location key from coordinates\n    const locationKey = locationInfo?.lat && locationInfo?.lon\n      ? `${locationInfo.lat},${locationInfo.lon}`\n      : null;\n\n    // Check if we have coordinates\n    const hasCoordinates = locationInfo && locationInfo.lat && locationInfo.lon;\n\n    // Check if we have region data\n    const hasRegion = locationInfo && (locationInfo.region || locationInfo.state);\n\n    if (locationKey !== prevLocationKey) {\n      // Coordinates changed - clear old alerts immediately\n      console.log('ðŸ“ Coordinates changed, clearing old alerts');\n      clearAlertsCache();\n      setAlerts([]);\n      setIsExpanded(false);\n      setExpandedAlertId(null);\n      setInitialFetchDone(false);\n      setLoading(true);\n      setPrevLocationKey(locationKey);\n\n      // Clear any existing timeout\n      if (regionTimeoutRef.current) {\n        clearTimeout(regionTimeoutRef.current);\n        regionTimeoutRef.current = null;\n      }\n\n      if (hasCoordinates) {\n        if (hasRegion) {\n          // Have everything - fetch immediately\n          console.log('ðŸ“ Complete location available, fetching alerts');\n          fetchAlerts(true);\n        } else {\n          // Have coordinates but no region - wait briefly then fetch anyway\n          console.log('ðŸ“ Waiting for region data (will fetch in 2s anyway)...');\n          regionTimeoutRef.current = setTimeout(() => {\n            console.log('ðŸ“ Timeout - fetching alerts without region data');\n            if (!fetchInProgressRef.current) {\n              fetchAlerts(true);\n            }\n          }, 2000);\n        }\n      }\n    } else if (hasCoordinates && hasRegion && !initialFetchDone && !fetchInProgressRef.current) {\n      // Region just became available - cancel timeout and fetch now\n      console.log('ðŸ“ Region now available, fetching alerts');\n      if (regionTimeoutRef.current) {\n        clearTimeout(regionTimeoutRef.current);\n        regionTimeoutRef.current = null;\n      }\n      fetchAlerts(true);\n    } else if (!locationKey && prevLocationKey !== null) {\n      // No location - clear everything\n      setAlerts([]);\n      setIsExpanded(false);\n      setExpandedAlertId(null);\n      setInitialFetchDone(false);\n      setPrevLocationKey(null);\n    }\n\n    // Cleanup timeout on unmount\n    return () => {\n      if (regionTimeoutRef.current) {\n        clearTimeout(regionTimeoutRef.current);\n      }\n    };\n  }, [locationInfo, prevLocationKey, initialFetchDone, fetchAlerts]);\n\n  // Handle page changes\n  useEffect(() => {\n    if (currentPage !== 0) {\n      setIsExpanded(false);\n    }\n  }, [currentPage]);\n\n  // Set up polling\n  useEffect(() => {\n    if (locationInfo && locationInfo.lat && locationInfo.lon && !isSearching && initialFetchDone) {\n      console.log('ðŸ”„ Starting alert polling');\n\n      if (pollingRef.current) {\n        clearInterval(pollingRef.current);\n      }\n\n      pollingRef.current = setInterval(pollForAlerts, POLLING_INTERVAL);\n\n      const handleVisibilityChange = () => {\n        if (!document.hidden) {\n          pollForAlerts();\n        }\n      };\n\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n\n      return () => {\n        if (pollingRef.current) {\n          clearInterval(pollingRef.current);\n        }\n        document.removeEventListener('visibilitychange', handleVisibilityChange);\n      };\n    }\n  }, [locationInfo, isSearching, initialFetchDone, pollForAlerts]);\n\n  // Regularly filter expired alerts\n  useEffect(() => {\n    const expiryCheckInterval = setInterval(() => {\n      setAlerts(prevAlerts => {\n        const activeAlerts = filterExpiredAlerts(prevAlerts);\n        if (activeAlerts.length !== prevAlerts.length) {\n          console.log('Removing expired alerts, remaining:', activeAlerts.length);\n          return activeAlerts;\n        }\n        return prevAlerts;\n      });\n    }, 60 * 1000);\n\n    return () => clearInterval(expiryCheckInterval);\n  }, [filterExpiredAlerts]);\n\n  const toggleExpanded = () => {\n    setIsExpanded(!isExpanded);\n  };\n\n  const toggleAlertExpanded = (alertId) => {\n    setExpandedAlertId(expandedAlertId === alertId ? null : alertId);\n  };\n\n  // Get alert color style based on EC color code\n  const getAlertColorStyle = (alert) => {\n    const ecColor = alert.ecColor || 'GREY';\n    const colors = EC_ALERT_COLORS[ecColor] || EC_ALERT_COLORS.GREY;\n    return {\n      backgroundColor: colors.bg,\n      color: colors.text,\n      borderColor: colors.border\n    };\n  };\n\n  // Get EC color class for border\n  const getECColorClass = (alert) => {\n    const ecColor = alert.ecColor || 'GREY';\n    return `alert-ec-${ecColor.toLowerCase()}`;\n  };\n\n  // Format date for display\n  const formatDate = (dateString) => {\n    try {\n      const date = new Date(dateString);\n      return date.toLocaleString('en-CA', {\n        weekday: 'long',\n        year: 'numeric',\n        month: 'long',\n        day: 'numeric',\n        hour: 'numeric',\n        minute: '2-digit',\n        timeZoneName: 'short'\n      });\n    } catch (err) {\n      return dateString;\n    }\n  };\n\n  // If no coordinates, don't render anything\n  if (!locationInfo || !locationInfo.lat || !locationInfo.lon) {\n    return null;\n  }\n\n  // Show loading spinner during initial fetch\n  if (loading && !initialFetchDone) {\n    return (\n      <div className=\"weather-alerts-container\">\n        <div className=\"alerts-header alerts-loading-header\">\n          <div className=\"alerts-header-content\">\n            <i className=\"fa-solid fa-spinner fa-spin\"></i>\n            <span>Checking for weather alerts...</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // If no alerts after fetch, show green \"No active alerts\" banner\n  if (alerts.length === 0 && initialFetchDone) {\n    return (\n      <div className=\"weather-alerts-container\">\n        <div className=\"alerts-header no-alerts\">\n          <div className=\"alerts-header-content\">\n            <i className=\"fa-solid fa-check-circle\"></i>\n            <span>No active weather alerts</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Get the header color based on the most severe alert\n  const mostSevereAlert = alerts[0];\n  const headerColors = mostSevereAlert?.colors || EC_ALERT_COLORS[mostSevereAlert?.ecColor] || EC_ALERT_COLORS.GREY;\n\n  return (\n    <div className=\"weather-alerts-container\">\n      <div\n        className={`alerts-header ${isExpanded ? 'expanded' : ''}`}\n        style={{ backgroundColor: headerColors.bg, color: headerColors.text }}\n        onClick={toggleExpanded}\n      >\n        <div className=\"alerts-header-content\">\n          <i className=\"fa-solid fa-triangle-exclamation\"></i>\n          <span>{alerts.length} Weather Alert{alerts.length !== 1 ? 's' : ''}</span>\n          <i className={`fa-solid ${isExpanded ? 'fa-chevron-up' : 'fa-chevron-down'}`}></i>\n        </div>\n      </div>\n\n      {isExpanded && (\n        <div className=\"alerts-content\">\n          {error && <div className=\"alerts-error\">{error}</div>}\n\n          {alerts.map((alert) => (\n            <div\n              key={alert.id}\n              className={`alert-item ${getECColorClass(alert)}`}\n            >\n              <div\n                className=\"alert-header\"\n                onClick={() => toggleAlertExpanded(alert.id)}\n              >\n                <div className=\"alert-title\">\n                  <span\n                    className=\"alert-type-badge\"\n                    style={getAlertColorStyle(alert)}\n                  >\n                    {alert.alertType || 'ALERT'}\n                  </span>\n                  <span className=\"alert-title-text\">{alert.title}</span>\n                </div>\n                {/* Show user's matched area in collapsed view */}\n                {expandedAlertId !== alert.id && (\n                  <div className=\"alert-areas-preview\">\n                    <i className=\"fa-solid fa-map\"></i>\n                    <span>{alert.matchedArea || alert.coverage || 'Your area'}</span>\n                  </div>\n                )}\n                <div className=\"alert-actions\">\n                  <i className={`fa-solid ${expandedAlertId === alert.id ? 'fa-chevron-up' : 'fa-chevron-down'}`}></i>\n                </div>\n              </div>\n\n              {expandedAlertId === alert.id && (\n                <div className=\"alert-details\">\n                  {/* Issued Time - formatted nicely */}\n                  <div className=\"alert-issued-time\">\n                    <i className=\"fa-solid fa-clock\"></i>\n                    <span>{formatDate(alert.sent)}</span>\n                  </div>\n\n                  {/* Impact Level and Confidence */}\n                  <div className=\"alert-meta-grid\">\n                    <div className=\"alert-meta-box\">\n                      <span className=\"meta-label\">Impact Level:</span>\n                      <span className={`meta-value impact-${(alert.details?.impactLevel || alert.severity || 'moderate').toLowerCase()}`}>\n                        {alert.details?.impactLevel || alert.severity || 'Moderate'}\n                      </span>\n                    </div>\n                    <div className=\"alert-meta-box\">\n                      <span className=\"meta-label\">Forecast Confidence:</span>\n                      <span className=\"meta-value\">\n                        {alert.details?.forecastConfidence || alert.certainty || 'Observed'}\n                      </span>\n                    </div>\n                  </div>\n\n                  {/* Summary - main description paragraph */}\n                  {alert.details?.summary && (\n                    <div className=\"alert-summary\">\n                      {alert.details.summary.split('\\n\\n').map((paragraph, index) => (\n                        paragraph.trim() ? <p key={index}>{paragraph.trim()}</p> : null\n                      ))}\n                    </div>\n                  )}\n\n                  {/* What section */}\n                  <div className=\"alert-section\">\n                    <div className=\"alert-section-label\">\n                      <i className=\"fa-solid fa-cloud-bolt\"></i>\n                      <span>What</span>\n                    </div>\n                    <div className=\"alert-section-content\">{alert.details?.what || alert.title}</div>\n                  </div>\n\n                  {/* When section */}\n                  {alert.details?.when && (\n                    <div className=\"alert-section\">\n                      <div className=\"alert-section-label\">\n                        <i className=\"fa-solid fa-calendar\"></i>\n                        <span>When</span>\n                      </div>\n                      <div className=\"alert-section-content\">{alert.details.when}</div>\n                    </div>\n                  )}\n\n                  {/* Remarks / Additional Information */}\n                  {(alert.details?.remarks || alert.details?.additionalInfo) && (\n                    <div className=\"alert-remarks\">\n                      {(alert.details.remarks || alert.details.additionalInfo).split('\\n\\n').map((paragraph, index) => (\n                        paragraph.trim() ? <p key={index}>{paragraph.trim()}</p> : null\n                      ))}\n                    </div>\n                  )}\n\n                  {/* In Effect For */}\n                  <div className=\"alert-section alert-in-effect\">\n                    <div className=\"alert-section-label\">\n                      <i className=\"fa-solid fa-map\"></i>\n                      <span>In Effect For</span>\n                    </div>\n                    <div className=\"alert-section-content\">{alert.matchedArea || alert.details?.inEffectFor || alert.coverage || 'Your area'}</div>\n                  </div>\n\n                  {/* Alert footer metadata */}\n                  <div className=\"alert-footer\">\n                    {alert.expires && (\n                      <div className=\"alert-expires\">\n                        <i className=\"fa-solid fa-hourglass-end\"></i>\n                        <span>Expires: {formatDate(alert.expires)}</span>\n                      </div>\n                    )}\n                    <div className=\"alert-source\">\n                      Source: {alert.provider}\n                    </div>\n                  </div>\n\n                  {alert.detailsUrl && (\n                    <div className=\"alert-link\">\n                      <a\n                        href={alert.detailsUrl}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        onClick={(e) => e.stopPropagation()}\n                      >\n                        View Full Details on Environment Canada <i className=\"fa-solid fa-external-link\"></i>\n                      </a>\n                    </div>\n                  )}\n                </div>\n              )}\n            </div>\n          ))}\n\n          <div className=\"alerts-footer\">\n            <button className=\"refresh-alerts-btn\" onClick={() => fetchAlerts(true)} disabled={loading}>\n              <i className={`fa-solid ${loading ? 'fa-spinner fa-spin' : 'fa-rotate'}`}></i>\n              {loading ? 'Refreshing...' : 'Refresh Alerts'}\n            </button>\n            {lastUpdate && (\n              <span className=\"last-update\">\n                Last updated: {lastUpdate.toLocaleTimeString()}\n              </span>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WeatherAlerts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}